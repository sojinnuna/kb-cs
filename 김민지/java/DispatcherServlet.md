# DispatcherServlet


## DispatcherServletì´ë€?

- ìŠ¤í”„ë§ MVCê°€ ì‚¬ìš©í•˜ëŠ” í•µì‹¬ ê°œë…
- HTTP í”„ë¡œí† ì½œë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì„ ê°€ì¥ ë¨¼ì € ë°›ì•„ **ì í•©í•œ ì»¨íŠ¸ë¡¤ëŸ¬ì— ìœ„ì„í•´ì£¼ëŠ”** í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì •ì˜í•¨
    - í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì–´ë–¤ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ `ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ`ê°€ ìš”ì²­ì„ ë°›ëŠ”ë°, ì´ë•Œ **ê³µí†µëœ ì‘ì—…ì€** ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì—ì„œ ì²˜ë¦¬í•˜ê³ , ì´ì™¸ ì‘ì—…ì€ ë‹¤ë¥¸ ì„¸ë¶€ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ìœ„ì„í•¨
- ê³¼ê±°ì—ëŠ” ëª¨ë“  ì„œë¸”ë¦¿ì„ URL ë§¤í•‘ì„ ìœ„í•´ web.xmlì— ëª¨ë‘ ë“±ë¡í•´ì£¼ì–´ì•¼ í–ˆìŒ
    - DispatcherServletì˜ ë“±ì¥ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì„ í•¸ë“¤ë§í•´ì£¼ê³  ê³µí†µ ì‘ì—…ì„ ì²˜ë¦¬í•˜ë©´ì„œ web.xmlì˜ ì˜ì¡´ì„ ë‚®ì¶œ ìˆ˜ ìˆê²Œ ë¨

<br>

### ìƒì† êµ¬ì¡°(ê³„ì¸µ êµ¬ì¡°)

- `DispatcherServlet` â¡ `FrameworkServlet` â¡ `HttpServletBean` â¡ `HttpServlet` â¡ `GenericServlet` â¡ `Servlet`
    ```java
    public class DispatcherServlet extends FrameworkServlet {
    }
    
    public abstract class FrameworkServlet extends HttpServletBean {
    }
    
    public abstract class HttpServletBean extends HttpServlet {
    }
    ```
- ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ë„ [ì„œë¸”ë¦¿](https://github.com/jmxx219/CS-Study/blob/main/spring/Servlet.md)ì˜ ì¼ì¢…ìœ¼ë¡œ, HttpServletì„ ìƒì†í•¨


<br>

### í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ íŒ¨í„´(Front Controller Pattern)

- ë„ì… ë°°ê²½
    - MVC íŒ¨í„´ ì¤‘ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë§ì•„ì§€ê³ , ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê³µí†µìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ ì¦ê°€í•œë‹¤ë©´ ì½”ë“œ ì¤‘ë³µì´ ë°œìƒí•¨
        - ê° ì»¨íŠ¸ë¡¤ëŸ¬ë§ˆë‹¤ ê³µí†µ ë¡œì§ì„ ë§Œë“¤ì–´ì•¼ í–ˆìŒ
    - í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë„ì… í›„ì—ëŠ” **ê³µí†µ ë¡œì§ì€ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì²˜ë¦¬**í•˜ê³ , ê°ì ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ë¡œì§ì€ ê° ì»¨í‹€ë¡¤ëŸ¬ì— ì²˜ë¦¬í•¨
        - ê³µí†µì˜ ê´€ì‹¬ì‚¬ë¥¼ ë³„ë„ë¡œ ëª¨ìœ¼ëŠ” ì—­í• 
- íŠ¹ì§•
    - ì„œë¸”ë¦¿ í•˜ë‚˜ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ëª¨ë‘ ë°›ìŒ
    - í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìš”ì²­ì— ë§ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•„ì„œ í˜¸ì¶œí•¨
    - ê³µí†µ ì²˜ë¦¬ ê°€ëŠ¥
    - í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ë¨ â¡ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë‚˜ë¨¸ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì§ì ‘ í˜¸ì¶œí•´ì£¼ê¸° ë•Œë¬¸
    - ìŠ¤í”„ë§ ì›¹ MCVì˜ í•µì‹¬ìœ¼ë¡œ, `DispatcherServlet`ì´ FrontController íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„ë¨
- ë„ì… ì´í›„ ì²˜ë¦¬ê³¼ì •
    1. í´ë¼ì´ì–¸íŠ¸ - HTTP ìš”ì²­
    2. Front Controller - URL ë§¤í•‘ ì •ë³´ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ ì¡°íšŒ í›„ ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œ
    3. Controller - ModelAndView ë°˜í™˜
    4. Front Controller - ViewResolver í˜¸ì¶œ
    5. ViewResolver - View ë°˜í™˜
    6. Front Controller - í´ë¼ì´ì–¸íŠ¸ì— View ì‘ë‹µì„ ì „ë‹¬
    
> ë·° ë¦¬ì¡¸ë²„(ViewResolver)
> 
> ìŠ¤í”„ë§ MVCì—ì„œ ë·° ì´ë¦„ì„ ì‹¤ì œ ë·° ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ì—­í• . í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•œ í›„ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë°˜í™˜í•˜ëŠ” ë…¼ë¦¬ì ì¸ ë·° ì´ë¦„ì„ ë¬¼ë¦¬ì ì¸ ë·°ë¡œ ë§¤í•‘í•´ì¤Œ
 

<br>
<br>


### ì–´ëŒ‘í„° íŒ¨í„´(Adapter Pattern)

- ë„ì… ë°°ê²½
    - ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì—ì„œ ìš”ì²­ì´ ì˜¤ë©´ ëª¨ë‘ ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì„ ê±°ì³ ì„¸ë¶€ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ê°€ëŠ”ë°, ê°ê°ì˜ **ì„¸ë¶€ ì»¨íŠ¸ë¡¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤ëŠ” ì™„ì „íˆ ë‹¤ë¥¸ ì¸í„°í˜ì´ìŠ¤ì´ê¸° ë•Œë¬¸ì— ì„œë¡œ ê°„ì˜ í˜¸í™˜ì´ ë¶ˆê°€ëŠ¥**í•œ ìƒíƒœì„
    - ì´ë•Œ ì–´ëŒ‘í„° íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ ê¸°ì¡´ êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ë©´ì„œ í”„ë ˆì„ì›Œí¬ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆìŒ
        - ê¸°ì¡´ì—ëŠ” í•œ ê°€ì§€ ë°©ì‹ì˜ ì¸í„°í˜ì´ìŠ¤ë§Œ ì‚¬ìš©ê°€ëŠ¥ í–ˆì§€ë§Œ, ì–´ëŒ‘í„° íŒ¨í„´ì„ ì´ìš©í•˜ì—¬ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë‹¤ì–‘í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•¨
- íŠ¹ì§•
    - ì–´ëŒ‘í„° íŒ¨í„´ì€ `í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ì¸í„°í˜ì´ìŠ¤ë“¤ì„ ì—°ê²°í•˜ëŠ” ë””ìì¸ íŒ¨í„´`ìœ¼ë¡œ, ê¸°ì¡´ì˜ í´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” ì½”ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤Œ
        - ì–´ëŒ‘í„°ìš© ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ íŒë‹¨í•˜ì—¬ ê·¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•¨
    - `ìŠ¤í”„ë§ MVCì˜ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°(HandlerAdapter) ì¸í„°í˜ì´ìŠ¤`ê°€ ë°”ë¡œ ì–´ëŒ‘í„° íŒ¨í„´ì„ ì‚¬ìš©í•¨
      - ìŠ¤í”„ë§ MVCì—ì„œ â€œí•¸ë“¤ëŸ¬â€ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ëª¨ë“  ê°ì²´ë¥¼ ì˜ë¯¸. ì´ëŠ” ì „í†µì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ì–‘í•œ í˜•íƒœì˜ ìš”ì²­ ì²˜ë¦¬ ê°ì²´ë¥¼ í¬í•¨
      - HandlerAdapterëŠ” íŠ¹ì • íƒ€ì…ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì œí•œë˜ì§€ ì•Šê³ , ë‹¤ì–‘í•œ í•¸ë“¤ëŸ¬ íƒ€ì…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë¨ -> ì»¨íŠ¸ë¡¤ëŸ¬ ëŒ€ì‹  í•¸ë“¤ëŸ¬ ì‚¬ìš©
- ë„ì… ì´í›„ ì²˜ë¦¬ê³¼ì •
    1. í´ë¼ì´ì–¸íŠ¸ - HTTP ìš”ì²­
    2. Front Controller
        - Handler Mapping ì •ë³´ì—ì„œ í•¸ë“¤ëŸ¬ ì¡°íšŒ
        - í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” Handler Adapter ì¡°íšŒ ë° í˜¸ì¶œ
    3. Handler Adapter
        - handler(ì‹¤ì œ Controller) í˜¸ì¶œ
        - ModelView ë°˜í™˜
    4. Front Controller - **ViewResolver** í˜¸ì¶œ
    5. ViewResolver - **View** ë°˜í™˜
    6. Front Controller - í´ë¼ì´ì–¸íŠ¸ì— View ì‘ë‹µì„ ì „ë‹¬

<br>
<br>

## ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì˜ ë™ì‘ ê³¼ì •

<br>

<img alt="ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ ë™ì ê³¼ì •" height="400" src="https://github.com/reddevilmidzy/CS-Study/assets/78539407/b3afda6d-bf0e-49d2-bb59-56082a28ceb7"/>

<br>
<br>

1. `DispatcherServlet`ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ **ì›¹ ìš”ì²­**(HttpServletRequest)ì´ ë“¤ì–´ì˜´
2. ì›¹ ìš”ì²­ì„ `HandlerMapping`ì— ìœ„ì„í•˜ì—¬ í•´ë‹¹ ìš”ì²­ì„ ì²˜ë¦¬í•  `Handler(Controller)`ë¥¼ íƒìƒ‰
3. ì°¾ì€ Handlerë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” `HandlerAdapter`ë¥¼ íƒìƒ‰
4. ì°¾ì€ `HandlerAdapter`ë¥¼ ì‚¬ìš©í•´ì„œ Handlerì˜ ë©”ì„œë“œë¥¼ ì‹¤í–‰
5. ì´ë•Œ Handlerì˜ ë°˜í™˜ê°’ì€ `Model`ê³¼ `View`ì„
6. View ì´ë¦„ì„ `ViewResolver`ì—ê²Œ ì „ë‹¬í•˜ê³ ,` ViewResolver`ëŠ” í•´ë‹¹í•˜ëŠ” View ê°ì²´ë¥¼ ë°˜í™˜í•¨
7. `DispatcherServlet`ì€ View ì—ê²Œ `Model`ì„ ì „ë‹¬í•˜ê³  í™”ë©´ í‘œì‹œë¥¼ ìš”ì²­í•˜ëŠ”ë°, ì´ë•Œ Modelì´ nullì´ë©´ Viewë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•¨
    - ë°˜ë©´ ê°’ì´ ìˆìœ¼ë©´ Viewì— Model ë°ì´í„°ë¥¼ ë Œë”ë§í•¨
9. ìµœì¢…ì ìœ¼ë¡œ DispatcherServletì€ **View ê²°ê³¼**(HttpServletResponse)ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°˜í™˜í•¨

> ìœ„ íë¦„ì€ `@Controller` ê¸°ì¤€ì´ê³ ,  `@RestController`ì˜ ê²½ìš° 6, 7ê³¼ì •ì´ ìƒëµëœë‹¤.  
> ì¦‰, ViewResolverë¥¼ íƒ€ì§€ ì•Šê³  ë°˜í™˜ê°’ì— ì•Œë§ëŠ” `MessageConverter`ë¥¼ ì°¾ì•„ ì‘ë‹µì„ ì‘ì„±í•œë‹¤.


<br>
<br>

### Ref

- [Spring DispatcherServlet(ë””ìŠ¤íŒ¨ì²˜ì„œë¸”ë¦¿) ê°œë…ë¶€í„° ë™ì‘ ê³¼ì •ê¹Œì§€](https://zzang9ha.tistory.com/441)
- [ìŠ¤í”„ë§ MVC 1í¸ - ë°±ì—”ë“œ ì›¹ ê°œë°œ í•µì‹¬ ê¸°ìˆ ](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1/)
- [[Spring] ğŸ“š Dispatcher Servlet ì´í•´í•˜ê¸°](https://velog.io/@betterfuture4/Spring-Dispatcher-Servlet-%EC%A0%95%EB%A6%AC)
- [[Spring] Dispatcher-Servlet(ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿)ì´ë€? ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì˜ ê°œë…ê³¼ ë™ì‘ ê³¼ì •](https://mangkyu.tistory.com/18)
- [DispatcherServlet - Part 1](https://tecoble.techcourse.co.kr/post/2021-06-25-dispatcherservlet-part-1/)
- [ìë°” ì–´ëŒ‘í„° íŒ¨í„´ì€ ì–´ë–»ê²Œ ì“°ì¼ê¹Œ?](https://yozm.wishket.com/magazine/detail/2077/)